window.onload=function(){function e(){v.fillStyle=L.color,v.fillRect(L.xStart,L.yStart,L.width,L.height)}function t(e){v.fillStyle=e.color,v.fillRect(e.x,e.y,e.width,e.height)}function n(e){for(var n=0;n<e.length;n++)t(e[n])}function o(){var e=M.x>=0||x>0,t=M.x<=g.width-M.width||0>x;return e&&t}function i(){var e=M.y>=0||m>0,t=M.y<=g.height-M.height||0>m;return t&&e}function r(e,t){return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)}function d(e,t){for(var n=0;n<t.length;n++)if(r(e,t[n]))return!0}function c(){k.textContent="You've been destroyed!"}function h(){r(M,S)&&(F.textContent="",k.textContent="You destroyed the Death Star!")}function u(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function a(e){return E[e.keyCode]?(u(e),!1):void 0}function l(){window.addEventListener&&window.addEventListener("DOMMouseScroll",u,!1),document.onkeydown=a}function y(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",u,!1),document.onkeydown=null}function w(){l(),window.scrollTo(0,document.body.scrollHeight)}function f(){e(),o()&&(M.x+=x/60*C),i()&&(M.y+=m/60*C),n([M,S,b,p,A]),d(M,D)&&c(),h(),requestAnimationFrame(f)}var s=0,g=document.getElementById("spaceField"),v=g.getContext("2d"),x=0,m=0,k=document.getElementById("page-header"),F=document.getElementById("instructions"),E={37:1,38:1,39:1,40:1},C=100,S={height:15,width:20,x:280,y:65,color:"#00FF00"},L={xStart:0,yStart:0,height:150,width:300,color:"#000000"},b={height:5,width:10,x:75,y:145,color:"#FFA500"},p={height:5,width:10,x:150,y:145,color:"#FFA500"},A={height:5,width:10,x:225,y:145,color:"#FFA500"},D=[b,p,A],M={height:10,width:15,x:10,y:10,color:"#FF0000"};g.addEventListener("click",w),document.addEventListener("keydown",function(e){if(s!=e.keyCode)switch(s=e.keyCode,e.keyCode){case 37:x=-1;break;case 38:m=-1;break;case 39:x=1;break;case 40:m=1}}),document.addEventListener("keyup",function(e){switch(e.keyCode){case 37:case 39:x=0;break;case 38:case 40:m=0}s=0}),requestAnimationFrame(f)};