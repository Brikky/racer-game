window.onload=function(){function e(e){return(elem=document.getElementById(e)).parentNode.removeChild(elem)}function t(){N.fillStyle=b.color,N.fillRect(b.xStart,b.yStart,b.width,b.height)}function n(e){N.fillStyle=e.color,N.fillRect(e.x,e.y,e.width,e.height)}function o(e){for(var t=0;t<e.length;t++)n(e[t])}function i(){var e=I.x>=0||R>0,t=I.x<=T.width-I.width||0>R;return e&&t}function d(){var e=I.y>=0||V>0,t=I.y<=T.height-I.height||0>V;return t&&e}function r(e,t){return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)}function c(){O.play();for(var e=0;e<M.length;e++)0==M[e].y&&(M[e].y=140),M[e].y-=1}function a(e,t){for(var n=0;n<t.length;n++)if(r(e,t[n]))return!0}function l(){G.textContent="You've been destroyed!",H.remove(),T.remove(),q.appendChild(W),q.appendChild(P),Q.play(),O=0}function h(){return r(I,F)}function u(){H.textContent="",G.textContent="You destroyed the Death Star!",T.remove(),K.play(),q.appendChild(Y),q.appendChild(P),Y.play(),O=0}function y(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function f(e){return U[e.keyCode]?(y(e),!1):void 0}function w(){window.addEventListener&&window.addEventListener("DOMMouseScroll",y,!1),document.onkeydown=f}function s(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",y,!1),document.onkeydown=null}function m(){w(),window.scrollTo(0,document.body.scrollHeight)}function g(){t(),i()&&(I.x+=R/60*J),d()&&(I.y+=V/60*J),c(),o(j),a(I,D)&&l(),h()&&u(),requestAnimationFrame(g)}var v={height:5,width:2,x:79,y:100,color:"#39ff14"},p={height:5,width:2,x:154,y:140,color:"#39ff14"},x={height:5,width:2,x:229,y:100,color:"#39ff14"},E={height:5,width:2,x:79,y:30,color:"#39ff14"},k={height:5,width:2,x:154,y:60,color:"#39ff14"},C={height:5,width:2,x:229,y:30,color:"#39ff14"},F={height:15,width:20,x:280,y:65,color:"#adff00"},b={xStart:0,yStart:0,height:150,width:300,color:"#000000"},A={height:5,width:10,x:75,y:145,color:"#FFA500"},S={height:5,width:10,x:150,y:145,color:"#FFA500"},L={height:5,width:10,x:225,y:145,color:"#FFA500"},I={height:10,width:15,x:10,y:10,color:"#FF0000"},B=0,D=[A,S,L,v,p,x,E,k,C],M=[v,p,x,E,k,C],O=new Audio("sounds/blaster-firing.mp3");O.loop=!1;var T=document.getElementById("spaceField"),q=document.getElementById("container"),N=T.getContext("2d"),R=0,V=0,Y=document.createElement("VIDEO");Y.src="video/death star explosion.mp4";var j=[I,F,A,S,L,v,p,x,E,k,C],G=document.getElementById("page-header"),H=document.getElementById("instructions"),P=document.createElement("BUTTON");P.textContent="Play Again",P.addEventListener("click",window.location.reload.bind(window.location));var U={37:1,38:1,39:1,40:1},z=[A,S,L],J=100,K=new Audio("sounds/theme.mp3");K.loop=!1;var Q=new Audio("sounds/vaderbreathing.mp3");Q.loop=!0;var W=document.createElement("IMG");W.setAttribute("src","/images/vader.jpg"),T.addEventListener("click",m),document.addEventListener("keydown",function(e){if(B!=e.keyCode)switch(B=e.keyCode,e.keyCode){case 37:R=-1;break;case 38:V=-1;break;case 39:R=1;break;case 40:V=1}}),document.addEventListener("keyup",function(e){switch(e.keyCode){case 37:case 39:R=0;break;case 38:case 40:V=0}B=0}),requestAnimationFrame(g)};